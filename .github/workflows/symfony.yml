name: Eddie Symphony PHP test

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  phpunit:
    name: Run PHPUnit test
    runs-on: ubuntu-latest
    
    steps:

       - uses: actions/checkout@v2
       
       - name: Setup PHP
       
         uses: shivammathur/setup-php@v2
         with:
             php-version: '7.4'
             extensions: ctype, bcmath, fileinfo, json, xml
             coverage: none
        
    - name: Install Composer dependencies
      run: composer install -n --prefer-dist
    
      #id: composer-cache
      #uses: actions/cache@v2
      #with:
        #path: vendor
        #key: ${{ runner.os }}-php-${{ hashFiles('**/composer.lock') }}
        #restore-keys: |
          #${{ runner.os }}-php-
    #- name: Install Dependencies
    #  run: composer install -q --no-ansi --no-interaction --no-scripts --no-progress --prefer-dist
    #- name: Create Database
    #  run: |
   #   mkdir -p data
     #   touch data/database.sqlite
    - name: Execute tests (Unit and Feature tests) via PHPUnit
     # env:
     #   DATABASE_URL: sqlite:///%kernel.project_dir%/data/database.sqlite
      run: ./vendor/bin/phpunit
